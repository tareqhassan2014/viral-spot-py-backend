# GET `/api/viral-analysis/{queue_id}/results` âš¡

Retrieves the final results of a viral analysis job.

## Description

This is the endpoint to call to retrieve the final, comprehensive results of a viral ideas analysis job. Once a job's status is `completed`, this endpoint will return a rich dataset containing all the insights generated by the AI pipeline.

The response includes:

-   Detailed information about the analysis process itself.
-   The primary user's profile data.
-   A list of the competitor profiles that were analyzed.
-   The reels from both the primary user and competitors that were used in the analysis.
-   The core `analysis_data` object, which contains the main insights, such as generated hooks, profile analysis, and more.

## Path Parameters

| Parameter  | Type   | Description                                       |
| :--------- | :----- | :------------------------------------------------ |
| `queue_id` | string | The ID of the completed analysis job to retrieve. |

## Responses

### Success: 200 OK

Returns a large JSON object with the complete analysis results.

**Example Response (Structure):**

```json
{
    "success": true,
    "data": {
        "analysis": {
            "id": "analysis_uuid",
            "status": "completed"
            // ... other analysis metadata
        },
        "primary_profile": {
            "username": "user_profile"
            // ... other profile data
        },
        "competitor_profiles": [
            {
                "username": "competitor1"
                // ... other competitor data
            }
        ],
        "reels": [
            {
                "content_id": "reel_abc",
                "reel_type": "primary"
                // ... other reel data
            }
        ],
        "analysis_data": {
            "profile_analysis": {
                // ... detailed analysis of the primary profile
            },
            "generated_hooks": [
                {
                    "hook_text": "You won't believe this..."
                    // ... other hook data
                }
            ]
            // ... many other analysis sections
        }
    }
}
```

### Error: 404 Not Found

Returned if the `queue_id` is not found, or if the analysis results for that job are not yet available.

### Error: 500 Internal Server Error

Returned for any other server-side errors.

## Implementation Details

-   **File:** `backend_api.py`
-   **Function:** `get_viral_analysis_results(queue_id: str, ...)`
-   **Database Tables:** This endpoint queries multiple tables to assemble the final response, including:
    -   `viral_ideas_queue`
    -   `primary_profiles`
    -   `viral_analysis_results`
    -   `viral_analysis_reels`
    -   `viral_ideas_competitors`
    -   `content`
    -   `viral_scripts`
-   **Core Data:** The most important part of the response is the `analysis_data` JSONB field from the `viral_analysis_results` table, which contains the bulk of the AI-generated insights.
